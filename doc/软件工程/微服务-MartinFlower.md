# 微服务

[微服务](https://martinfowler.com/articles/microservices.html)

**微服务架构**是一种将应用设计成**一系列可以独立发布的服务**的软件设计方法。

微服务架构风格是一种将一个单一应用程序开发为一组小型服务的方法，每个服务运行在自己的进程中，服务间通信采用轻量级通信机制(HTTP)。这些服务围绕业务能力构建并可以
通过全自动部署机制独立部署。服务可以采用不同的语言开发，使用不同的数据存储技术。

单体应用的缺陷在于：系统的任何改变都将牵涉到重新构建和部署服务端的一个新版本。单体应用的水平扩展通过在负载均衡器后面运行多个实例。

构建应用程序为服务套件。除了服务是可以独立部署、可独立扩展之外，每个服务都提供一个固定的模块边界。

## 微服务架构特性

### “组件化”与“多服务”

什么是组件？组件就是一个可以独立更换和升级的软件单元。

组件化，将软件分解为诸多服务。

**服务是进程外的组件。**

### 围绕“业务功能”组织团队

**康威定律**：任何设计(广义上的)系统的组织，都会产生这样一个设计，即该设计的结构与该组织的沟通结构一致。

微服务采用不同的方式来分解系统，即根据**业务功能(business capability)**来将系统分解为若干服务。这些服务针对该业务领域提供多层次广泛的软件实现。

团队是跨职能的，它拥有软件开发所需的全方位的技能。

### “做产品”而不是“做项目”

**一个团队在一个产品的整个生命周期中都应该保持对其拥有。**
其被认为来自于亚马逊的理念：谁构建，谁运行。即一个开发团队对一个在生产环境下运行的软件**负全责**。

### “智能端点”与“傻瓜管道”

当在不同的进程之间构建各种通信结构时，已经有很多产品和方法，来强调将大量的智能特性纳入通信机制本身。

微服务社区主张采取另一种做法：智能端点*Smart Endpoint*和傻瓜管道*Dump Pipe*。使用微服务所构建的各个应用目标，都应该尽可能的实现**高内聚和低耦合**
，它们拥有自己的逻辑领域，并且更多的是像Unix的过滤器*filter*那样来工作---即接收一个请求，对其进行业务逻辑，并产生一个响应。

### “去中心化”的治理技术

### “去中心化"地管理数据
  
从最抽象的层面来看，意味着各个系统对客观事件所构建的概念模型将彼此各不相同。
DDD将一个复杂的领域划分为多个限界上下文，并且将其相互之间的关系用图画出来。
如同在概念模型上去中心化的决策一样，微服务也在数据存储上进行去中心化的决策。微服务更喜欢让每一个服务来管理其自有的数据库。
其实现可以采用相同数据库技术的不同数据库实例，也可以采用完全不同的数据库系统。**多语种持久化**。在一个单块系统中也能使用多语种持久化。

### 为失效设计
  
使用服务作为一个组件的结果是应用程序需要被设计成能够容忍服务失效。任何服务调用都可能因为供应者不可用而失败，客户端必须优雅的应对这种失败。

因为服务可能失效，因此能快速检测故障，能自动恢复服务是很重要的。微服务应用程序投入大量比重来进行应用程序的实时监测