# 服务降级

大促或者业务高峰期的时候，为了保证核心业务的SLA，往往需要停掉一些不太重要的业务。
另外一种场景就是某些服务因为某些原因不可用，但是流程不能直接失败，需要本地Mock服务端实现，做流程放通。

> 服务降级，主要包括容错降级和屏蔽降级两种模式。

## 屏蔽降级

**降级流程：**
1. 运维人员以管理员身份登录服务治理控制台，管理员具备服务治理的全套权限。
2. 运维人员选择服务降级菜单，在服务降级菜单中选择屏蔽降级。
3. 通过服务查询界面选择需要降级的服务，注意服务的分组和版本信息，指定具体的降级策略:返回null，返回指定异常还是执行本地Mock接口实现。
4. 服务治理Portal通过服务注册中心客户端SDK，将屏蔽降级指令和相关信息发送到服务注册中心。
5. 服务注册中心接收到屏蔽降级消息之后，以事件的形式分别群发给服务提供者集群和服务消费者集群。
6. 服务消费者接收到屏蔽降级事件通知之后，获取相关内容，更新本地缓存的服务订阅信息。当发起远程服务调用时，需要与屏蔽降级策略做匹配，如果匹配成功，则执行
屏蔽降级逻辑，不发起远程服务调用。
7. 服务提供者集群接收到屏蔽降级事件通知之后，获取相关内容，更新本地的服务发布缓存信息，将对应的服务降级属性修改为屏蔽降级。
8. 操作成功之后，服务注册中心返回降级成功的应答消息。
9. 运维人员查询服务提供者列表，查看服务状态。
10. 服务注册中心返回服务状态为屏蔽降级状态。

